{"ast":null,"code":"const _excluded = [\"value\", \"grid\", \"optionsList\", \"setValue\", \"locale\", \"className\", \"humanizeLabels\", \"disabled\", \"readOnly\", \"leadingZero\", \"clockFormat\", \"period\", \"unit\", \"periodicityOnDoubleClick\", \"mode\"];\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useMemo, useCallback, useRef } from 'react';\nimport Select from 'antd/lib/select';\nimport { DEFAULT_LOCALE_EN } from '../locale';\nimport { classNames, sort } from '../utils';\nimport { parsePartArray, partToString, formatValue } from '../converter';\nexport default function CustomSelect(props) {\n  const {\n    value,\n    grid = true,\n    optionsList,\n    setValue,\n    locale,\n    className,\n    humanizeLabels,\n    disabled,\n    readOnly,\n    leadingZero,\n    clockFormat,\n    period,\n    unit,\n    periodicityOnDoubleClick,\n    mode\n  } = props,\n        otherProps = _objectWithoutProperties(props, _excluded);\n\n  const stringValue = useMemo(() => {\n    if (value && Array.isArray(value)) {\n      return value.map(value => value.toString());\n    }\n  }, [value]);\n  const options = useMemo(() => {\n    if (optionsList) {\n      return optionsList.map((option, index) => {\n        const number = unit.min === 0 ? index : index + 1;\n        return {\n          value: number.toString(),\n          label: option\n        };\n      });\n    }\n\n    return [...Array(unit.total)].map((e, index) => {\n      const number = unit.min === 0 ? index : index + 1;\n      return {\n        value: number.toString(),\n        label: formatValue(number, unit, humanizeLabels, leadingZero, clockFormat)\n      };\n    });\n  }, [optionsList, leadingZero, humanizeLabels, clockFormat]);\n  const localeJSON = JSON.stringify(locale);\n  const renderTag = useCallback(props => {\n    const {\n      value: itemValue\n    } = props;\n\n    if (!value || value[0] !== Number(itemValue)) {\n      return React.createElement(React.Fragment, null);\n    }\n\n    const parsedArray = parsePartArray(value, unit);\n    const cronValue = partToString(parsedArray, unit, humanizeLabels, leadingZero, clockFormat);\n    const testEveryValue = cronValue.match(/^\\*\\/([0-9]+),?/) || [];\n    return React.createElement(\"div\", null, testEveryValue[1] ? `${locale.everyText || DEFAULT_LOCALE_EN.everyText} ${testEveryValue[1]}` : cronValue);\n  }, [value, localeJSON, humanizeLabels, leadingZero, clockFormat]);\n  const simpleClick = useCallback(newValueOption => {\n    const newValueOptions = Array.isArray(newValueOption) ? sort(newValueOption) : [newValueOption];\n    let newValue = newValueOptions;\n\n    if (value) {\n      newValue = mode === 'single' ? [] : [...value];\n      newValueOptions.forEach(o => {\n        const newValueOptionNumber = Number(o);\n\n        if (value.some(v => v === newValueOptionNumber)) {\n          newValue = newValue.filter(v => v !== newValueOptionNumber);\n        } else {\n          newValue = sort([...newValue, newValueOptionNumber]);\n        }\n      });\n    }\n\n    if (newValue.length === unit.total) {\n      setValue([]);\n    } else {\n      setValue(newValue);\n    }\n  }, [setValue, value]);\n  const doubleClick = useCallback(newValueOption => {\n    if (newValueOption !== 0 && newValueOption !== 1) {\n      const limit = unit.total + unit.min;\n      const newValue = [];\n\n      for (let i = unit.min; i < limit; i++) {\n        if (i % newValueOption === 0) {\n          newValue.push(i);\n        }\n      }\n\n      const oldValueEqualNewValue = value && newValue && value.length === newValue.length && value.every((v, i) => v === newValue[i]);\n      const allValuesSelected = newValue.length === options.length;\n\n      if (allValuesSelected) {\n        setValue([]);\n      } else if (oldValueEqualNewValue) {\n        setValue([]);\n      } else {\n        setValue(newValue);\n      }\n    } else {\n      setValue([]);\n    }\n  }, [value, options, setValue]);\n  const clicksRef = useRef([]);\n  const onOptionClick = useCallback(newValueOption => {\n    if (!readOnly) {\n      const doubleClickTimeout = 300;\n      const clicks = clicksRef.current;\n      clicks.push({\n        time: new Date().getTime(),\n        value: Number(newValueOption)\n      });\n      const id = window.setTimeout(() => {\n        if (mode === 'multiple' && periodicityOnDoubleClick && clicks.length > 1 && clicks[clicks.length - 1].time - clicks[clicks.length - 2].time < doubleClickTimeout) {\n          if (clicks[clicks.length - 1].value === clicks[clicks.length - 2].value) {\n            doubleClick(Number(newValueOption));\n          } else {\n            simpleClick([clicks[clicks.length - 2].value, clicks[clicks.length - 1].value]);\n          }\n        } else {\n          simpleClick(Number(newValueOption));\n        }\n\n        clicksRef.current = [];\n      }, doubleClickTimeout);\n      return () => {\n        window.clearTimeout(id);\n      };\n    }\n  }, [clicksRef, simpleClick, doubleClick, readOnly, periodicityOnDoubleClick, mode]);\n  const onClear = useCallback(() => {\n    if (!readOnly) {\n      setValue([]);\n    }\n  }, [setValue, readOnly]);\n  const internalClassName = useMemo(() => classNames({\n    'react-js-cron-select': true,\n    'react-js-cron-custom-select': true,\n    [`${className}-select`]: !!className\n  }), [className]);\n  const dropdownClassNames = useMemo(() => classNames({\n    'react-js-cron-select-dropdown': true,\n    [`react-js-cron-select-dropdown-${unit.type}`]: true,\n    'react-js-cron-custom-select-dropdown': true,\n    [`react-js-cron-custom-select-dropdown-${unit.type}`]: true,\n    [`react-js-cron-custom-select-dropdown-minutes-large`]: unit.type === 'minutes' && period !== 'hour' && period !== 'day',\n    [`react-js-cron-custom-select-dropdown-minutes-medium`]: unit.type === 'minutes' && (period === 'day' || period === 'hour'),\n    'react-js-cron-custom-select-dropdown-hours-twelve-hour-clock': unit.type === 'hours' && clockFormat === '12-hour-clock',\n    'react-js-cron-custom-select-dropdown-grid': !!grid,\n    [`${className}-select-dropdown`]: !!className,\n    [`${className}-select-dropdown-${unit.type}`]: !!className\n  }), [className, grid, clockFormat, period]);\n  return React.createElement(Select, _extends({\n    mode: \"multiple\",\n    allowClear: !readOnly,\n    virtual: false,\n    open: readOnly ? false : undefined,\n    value: stringValue,\n    onClear: onClear,\n    tagRender: renderTag,\n    className: internalClassName,\n    dropdownClassName: dropdownClassNames,\n    options: options,\n    showSearch: false,\n    showArrow: !readOnly,\n    menuItemSelectedIcon: null,\n    dropdownMatchSelectWidth: false,\n    onSelect: onOptionClick,\n    onDeselect: onOptionClick,\n    disabled: disabled,\n    dropdownAlign: (unit.type === 'minutes' || unit.type === 'hours') && period !== 'day' && period !== 'hour' ? {\n      points: ['tr', 'br']\n    } : undefined\n  }, otherProps));\n}","map":{"version":3,"sources":["/home/jinsonshaju/collateral/collateral-email-tracker/node_modules/react-js-cron/dist/esm/components/CustomSelect.js"],"names":["_excluded","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","indexOf","propertyIsEnumerable","sourceKeys","keys","React","useMemo","useCallback","useRef","Select","DEFAULT_LOCALE_EN","classNames","sort","parsePartArray","partToString","formatValue","CustomSelect","props","value","grid","optionsList","setValue","locale","className","humanizeLabels","disabled","readOnly","leadingZero","clockFormat","period","unit","periodicityOnDoubleClick","mode","otherProps","stringValue","Array","isArray","map","toString","options","option","index","number","min","label","total","e","localeJSON","JSON","stringify","renderTag","itemValue","Number","createElement","Fragment","parsedArray","cronValue","testEveryValue","match","everyText","simpleClick","newValueOption","newValueOptions","newValue","forEach","o","newValueOptionNumber","some","v","filter","doubleClick","limit","push","oldValueEqualNewValue","every","allValuesSelected","clicksRef","onOptionClick","doubleClickTimeout","clicks","current","time","Date","getTime","id","window","setTimeout","clearTimeout","onClear","internalClassName","dropdownClassNames","type","allowClear","virtual","open","undefined","tagRender","dropdownClassName","showSearch","showArrow","menuItemSelectedIcon","dropdownMatchSelectWidth","onSelect","onDeselect","dropdownAlign","points"],"mappings":"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","sourcesContent":["const _excluded = [\"value\", \"grid\", \"optionsList\", \"setValue\", \"locale\", \"className\", \"humanizeLabels\", \"disabled\", \"readOnly\", \"leadingZero\", \"clockFormat\", \"period\", \"unit\", \"periodicityOnDoubleClick\", \"mode\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useMemo, useCallback, useRef } from 'react';\nimport Select from 'antd/lib/select';\nimport { DEFAULT_LOCALE_EN } from '../locale';\nimport { classNames, sort } from '../utils';\nimport { parsePartArray, partToString, formatValue } from '../converter';\nexport default function CustomSelect(props) {\n  const {\n    value,\n    grid = true,\n    optionsList,\n    setValue,\n    locale,\n    className,\n    humanizeLabels,\n    disabled,\n    readOnly,\n    leadingZero,\n    clockFormat,\n    period,\n    unit,\n    periodicityOnDoubleClick,\n    mode\n  } = props,\n        otherProps = _objectWithoutProperties(props, _excluded);\n\n  const stringValue = useMemo(() => {\n    if (value && Array.isArray(value)) {\n      return value.map(value => value.toString());\n    }\n  }, [value]);\n  const options = useMemo(() => {\n    if (optionsList) {\n      return optionsList.map((option, index) => {\n        const number = unit.min === 0 ? index : index + 1;\n        return {\n          value: number.toString(),\n          label: option\n        };\n      });\n    }\n\n    return [...Array(unit.total)].map((e, index) => {\n      const number = unit.min === 0 ? index : index + 1;\n      return {\n        value: number.toString(),\n        label: formatValue(number, unit, humanizeLabels, leadingZero, clockFormat)\n      };\n    });\n  }, [optionsList, leadingZero, humanizeLabels, clockFormat]);\n  const localeJSON = JSON.stringify(locale);\n  const renderTag = useCallback(props => {\n    const {\n      value: itemValue\n    } = props;\n\n    if (!value || value[0] !== Number(itemValue)) {\n      return React.createElement(React.Fragment, null);\n    }\n\n    const parsedArray = parsePartArray(value, unit);\n    const cronValue = partToString(parsedArray, unit, humanizeLabels, leadingZero, clockFormat);\n    const testEveryValue = cronValue.match(/^\\*\\/([0-9]+),?/) || [];\n    return React.createElement(\"div\", null, testEveryValue[1] ? `${locale.everyText || DEFAULT_LOCALE_EN.everyText} ${testEveryValue[1]}` : cronValue);\n  }, [value, localeJSON, humanizeLabels, leadingZero, clockFormat]);\n  const simpleClick = useCallback(newValueOption => {\n    const newValueOptions = Array.isArray(newValueOption) ? sort(newValueOption) : [newValueOption];\n    let newValue = newValueOptions;\n\n    if (value) {\n      newValue = mode === 'single' ? [] : [...value];\n      newValueOptions.forEach(o => {\n        const newValueOptionNumber = Number(o);\n\n        if (value.some(v => v === newValueOptionNumber)) {\n          newValue = newValue.filter(v => v !== newValueOptionNumber);\n        } else {\n          newValue = sort([...newValue, newValueOptionNumber]);\n        }\n      });\n    }\n\n    if (newValue.length === unit.total) {\n      setValue([]);\n    } else {\n      setValue(newValue);\n    }\n  }, [setValue, value]);\n  const doubleClick = useCallback(newValueOption => {\n    if (newValueOption !== 0 && newValueOption !== 1) {\n      const limit = unit.total + unit.min;\n      const newValue = [];\n\n      for (let i = unit.min; i < limit; i++) {\n        if (i % newValueOption === 0) {\n          newValue.push(i);\n        }\n      }\n\n      const oldValueEqualNewValue = value && newValue && value.length === newValue.length && value.every((v, i) => v === newValue[i]);\n      const allValuesSelected = newValue.length === options.length;\n\n      if (allValuesSelected) {\n        setValue([]);\n      } else if (oldValueEqualNewValue) {\n        setValue([]);\n      } else {\n        setValue(newValue);\n      }\n    } else {\n      setValue([]);\n    }\n  }, [value, options, setValue]);\n  const clicksRef = useRef([]);\n  const onOptionClick = useCallback(newValueOption => {\n    if (!readOnly) {\n      const doubleClickTimeout = 300;\n      const clicks = clicksRef.current;\n      clicks.push({\n        time: new Date().getTime(),\n        value: Number(newValueOption)\n      });\n      const id = window.setTimeout(() => {\n        if (mode === 'multiple' && periodicityOnDoubleClick && clicks.length > 1 && clicks[clicks.length - 1].time - clicks[clicks.length - 2].time < doubleClickTimeout) {\n          if (clicks[clicks.length - 1].value === clicks[clicks.length - 2].value) {\n            doubleClick(Number(newValueOption));\n          } else {\n            simpleClick([clicks[clicks.length - 2].value, clicks[clicks.length - 1].value]);\n          }\n        } else {\n          simpleClick(Number(newValueOption));\n        }\n\n        clicksRef.current = [];\n      }, doubleClickTimeout);\n      return () => {\n        window.clearTimeout(id);\n      };\n    }\n  }, [clicksRef, simpleClick, doubleClick, readOnly, periodicityOnDoubleClick, mode]);\n  const onClear = useCallback(() => {\n    if (!readOnly) {\n      setValue([]);\n    }\n  }, [setValue, readOnly]);\n  const internalClassName = useMemo(() => classNames({\n    'react-js-cron-select': true,\n    'react-js-cron-custom-select': true,\n    [`${className}-select`]: !!className\n  }), [className]);\n  const dropdownClassNames = useMemo(() => classNames({\n    'react-js-cron-select-dropdown': true,\n    [`react-js-cron-select-dropdown-${unit.type}`]: true,\n    'react-js-cron-custom-select-dropdown': true,\n    [`react-js-cron-custom-select-dropdown-${unit.type}`]: true,\n    [`react-js-cron-custom-select-dropdown-minutes-large`]: unit.type === 'minutes' && period !== 'hour' && period !== 'day',\n    [`react-js-cron-custom-select-dropdown-minutes-medium`]: unit.type === 'minutes' && (period === 'day' || period === 'hour'),\n    'react-js-cron-custom-select-dropdown-hours-twelve-hour-clock': unit.type === 'hours' && clockFormat === '12-hour-clock',\n    'react-js-cron-custom-select-dropdown-grid': !!grid,\n    [`${className}-select-dropdown`]: !!className,\n    [`${className}-select-dropdown-${unit.type}`]: !!className\n  }), [className, grid, clockFormat, period]);\n  return React.createElement(Select, _extends({\n    mode: \"multiple\",\n    allowClear: !readOnly,\n    virtual: false,\n    open: readOnly ? false : undefined,\n    value: stringValue,\n    onClear: onClear,\n    tagRender: renderTag,\n    className: internalClassName,\n    dropdownClassName: dropdownClassNames,\n    options: options,\n    showSearch: false,\n    showArrow: !readOnly,\n    menuItemSelectedIcon: null,\n    dropdownMatchSelectWidth: false,\n    onSelect: onOptionClick,\n    onDeselect: onOptionClick,\n    disabled: disabled,\n    dropdownAlign: (unit.type === 'minutes' || unit.type === 'hours') && period !== 'day' && period !== 'hour' ? {\n      points: ['tr', 'br']\n    } : undefined\n  }, otherProps));\n}"]},"metadata":{},"sourceType":"module"}