{"ast":null,"code":"\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.injectCSS = injectCSS;\nexports.removeCSS = removeCSS;\nexports.updateCSS = updateCSS;\n\nvar _canUseDom = _interopRequireDefault(require(\"./canUseDom\"));\n\nvar MARK_KEY = \"rc-util-key\";\n\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      mark = _ref.mark;\n\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n\n  return MARK_KEY;\n}\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction injectCSS(css) {\n  var _option$csp;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!(0, _canUseDom.default)()) {\n    return null;\n  }\n\n  var styleNode = document.createElement('style');\n\n  if ((_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce) {\n    var _option$csp2;\n\n    styleNode.nonce = (_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce;\n  }\n\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (option.prepend && container.prepend) {\n    // Use `prepend` first\n    container.prepend(styleNode);\n  } else if (option.prepend && firstChild) {\n    // Fallback to `insertBefore` like IE not support `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\n\nvar containerCache = new Map();\n\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return Array.from(containerCache.get(container).children).find(function (node) {\n    return node.tagName === 'STYLE' && node.getAttribute(getMark(option)) === key;\n  });\n}\n\nfunction removeCSS(key) {\n  var _existNode$parentNode;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  existNode === null || existNode === void 0 ? void 0 : (_existNode$parentNode = existNode.parentNode) === null || _existNode$parentNode === void 0 ? void 0 : _existNode$parentNode.removeChild(existNode);\n}\n\nfunction updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    parentNode.removeChild(placeholderStyle);\n  }\n\n  var existNode = findExistNode(key, option);\n\n  if (existNode) {\n    var _option$csp3, _option$csp4;\n\n    if (((_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce) && existNode.nonce !== ((_option$csp4 = option.csp) === null || _option$csp4 === void 0 ? void 0 : _option$csp4.nonce)) {\n      var _option$csp5;\n\n      existNode.nonce = (_option$csp5 = option.csp) === null || _option$csp5 === void 0 ? void 0 : _option$csp5.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}","map":{"version":3,"sources":["/home/jinsonshaju/collateral/collateral-email-tracker/node_modules/rc-util/lib/Dom/dynamicCSS.js"],"names":["_interopRequireDefault","require","Object","defineProperty","exports","value","injectCSS","removeCSS","updateCSS","_canUseDom","MARK_KEY","getMark","_ref","arguments","length","undefined","mark","startsWith","concat","getContainer","option","attachTo","head","document","querySelector","body","css","_option$csp","default","styleNode","createElement","csp","nonce","_option$csp2","innerHTML","container","firstChild","prepend","insertBefore","appendChild","containerCache","Map","findExistNode","key","Array","from","get","children","find","node","tagName","getAttribute","_existNode$parentNode","existNode","parentNode","removeChild","has","placeholderStyle","set","_option$csp3","_option$csp4","_option$csp5","newNode","setAttribute"],"mappings":"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","sourcesContent":["\"use strict\";\n\nvar _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.injectCSS = injectCSS;\nexports.removeCSS = removeCSS;\nexports.updateCSS = updateCSS;\n\nvar _canUseDom = _interopRequireDefault(require(\"./canUseDom\"));\n\nvar MARK_KEY = \"rc-util-key\";\n\nfunction getMark() {\n  var _ref = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {},\n      mark = _ref.mark;\n\n  if (mark) {\n    return mark.startsWith('data-') ? mark : \"data-\".concat(mark);\n  }\n\n  return MARK_KEY;\n}\n\nfunction getContainer(option) {\n  if (option.attachTo) {\n    return option.attachTo;\n  }\n\n  var head = document.querySelector('head');\n  return head || document.body;\n}\n\nfunction injectCSS(css) {\n  var _option$csp;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n  if (!(0, _canUseDom.default)()) {\n    return null;\n  }\n\n  var styleNode = document.createElement('style');\n\n  if ((_option$csp = option.csp) === null || _option$csp === void 0 ? void 0 : _option$csp.nonce) {\n    var _option$csp2;\n\n    styleNode.nonce = (_option$csp2 = option.csp) === null || _option$csp2 === void 0 ? void 0 : _option$csp2.nonce;\n  }\n\n  styleNode.innerHTML = css;\n  var container = getContainer(option);\n  var firstChild = container.firstChild;\n\n  if (option.prepend && container.prepend) {\n    // Use `prepend` first\n    container.prepend(styleNode);\n  } else if (option.prepend && firstChild) {\n    // Fallback to `insertBefore` like IE not support `prepend`\n    container.insertBefore(styleNode, firstChild);\n  } else {\n    container.appendChild(styleNode);\n  }\n\n  return styleNode;\n}\n\nvar containerCache = new Map();\n\nfunction findExistNode(key) {\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var container = getContainer(option);\n  return Array.from(containerCache.get(container).children).find(function (node) {\n    return node.tagName === 'STYLE' && node.getAttribute(getMark(option)) === key;\n  });\n}\n\nfunction removeCSS(key) {\n  var _existNode$parentNode;\n\n  var option = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var existNode = findExistNode(key, option);\n  existNode === null || existNode === void 0 ? void 0 : (_existNode$parentNode = existNode.parentNode) === null || _existNode$parentNode === void 0 ? void 0 : _existNode$parentNode.removeChild(existNode);\n}\n\nfunction updateCSS(css, key) {\n  var option = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var container = getContainer(option); // Get real parent\n\n  if (!containerCache.has(container)) {\n    var placeholderStyle = injectCSS('', option);\n    var parentNode = placeholderStyle.parentNode;\n    containerCache.set(container, parentNode);\n    parentNode.removeChild(placeholderStyle);\n  }\n\n  var existNode = findExistNode(key, option);\n\n  if (existNode) {\n    var _option$csp3, _option$csp4;\n\n    if (((_option$csp3 = option.csp) === null || _option$csp3 === void 0 ? void 0 : _option$csp3.nonce) && existNode.nonce !== ((_option$csp4 = option.csp) === null || _option$csp4 === void 0 ? void 0 : _option$csp4.nonce)) {\n      var _option$csp5;\n\n      existNode.nonce = (_option$csp5 = option.csp) === null || _option$csp5 === void 0 ? void 0 : _option$csp5.nonce;\n    }\n\n    if (existNode.innerHTML !== css) {\n      existNode.innerHTML = css;\n    }\n\n    return existNode;\n  }\n\n  var newNode = injectCSS(css, option);\n  newNode.setAttribute(getMark(option), key);\n  return newNode;\n}"]},"metadata":{},"sourceType":"script"}